{"version":3,"sources":["../app.js"],"names":["file","fs","readdirSync","console","log","name","path","parse","require","default","app","Koa","use","root","Router","get","ctx","body","routes","listen"],"mappings":"aAAA,wB;AACA,4B;AACA,0B;AACA,uC;AACA,+C;AACA,uC;;AAEA;AACA,CAAC,YAAY;AACT,SAAK,IAAIA,IAAT,IAAiBC,aAAGC,WAAH,CAAe,WAAf,CAAjB,EAA8C;AAC1CC,gBAAQC,GAAR,CAAa,oBAAmBJ,IAAK,EAArC;;AAEA,cAAM,EAAEK,IAAF,KAAWC,eAAKC,KAAL,CAAWP,IAAX,CAAjB;AACAQ,gBAAS,aAAYH,IAAK,EAA1B,EAA6BI,OAA7B;AACH;AACJ,CAPD;;AASA;AACA,CAAC,YAAY;AACT,UAAMC,MAAM,IAAIC,aAAJ,EAAZ;AACAD,QAAIE,GAAJ,CAAQ,0BAAR;AACAF,QAAIE,GAAJ,CAAQ,8BAAR;;AAEA,UAAMC,OAAO,IAAIC,mBAAJ,EAAb;AACAD,SAAKE,GAAL,CAAS,GAAT,EAAcC,OAAO;AACjBA,YAAIC,IAAJ,GAAW,aAAX;AACH,KAFD;;AAIA;AACA,SAAK,IAAIjB,IAAT,IAAiBC,aAAGC,WAAH,CAAe,UAAf,CAAjB,EAA6C;AACzCC,gBAAQC,GAAR,CAAa,mBAAkBJ,IAAK,EAApC;;AAEA,cAAM,EAAEK,IAAF,KAAWC,eAAKC,KAAL,CAAWP,IAAX,CAAjB;AACAa,aAAKD,GAAL,CAAU,IAAGP,IAAK,EAAlB,EAAqBG,QAAS,YAAWH,IAAK,EAAzB,EAA4BI,OAA5B,CAAoCS,MAApC,EAArB;AACH;AACDR,QAAIE,GAAJ,CAAQC,KAAKK,MAAL,EAAR;;AAEAR,QAAIS,MAAJ,CAAW,IAAX;AACAhB,YAAQC,GAAR,CAAa,gBAAb;AACH,CArBD","file":"app.js","sourcesContent":["import fs from 'fs'\nimport path from 'path'\nimport Koa from 'koa'\nimport logger from 'koa-logger'\nimport bodyParser from 'koa-bodyparser'\nimport Router from 'koa-router'\n\n// Sniffer Service\n(function () {\n    for (let file of fs.readdirSync('./sniffer')) {\n        console.log(`loading sniffer: ${file}`)\n\n        const { name } = path.parse(file)\n        require(`./sniffer/${name}`).default()\n    }\n})();\n\n// Server\n(function () {\n    const app = new Koa()\n    app.use(logger())\n    app.use(bodyParser())\n\n    const root = new Router()\n    root.get('/', ctx => {\n        ctx.body = 'Hello World'\n    })\n\n    // Load all routers\n    for (let file of fs.readdirSync('./router')) {\n        console.log(`loading module: ${file}`)\n\n        const { name } = path.parse(file)\n        root.use(`/${name}`, require(`./router/${name}`).default.routes())\n    }\n    app.use(root.routes())\n\n    app.listen(3000)\n    console.log(`Listen at 3000`)\n})();"]}