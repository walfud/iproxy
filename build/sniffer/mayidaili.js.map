{"version":3,"sources":["../../sniffer/mayidaili.js"],"names":["saver","browser","puppeteer","launch","headless","args","page","newPage","goto","waitForSelector","url","$eval","x","href","proxyStr","innerText","split","filter","map","replace","forEach","close"],"mappings":";;;;;AAKA,sC;AACA,uC,mJANA;;;+MAQe,gBAAgBA,KAAhB,EAAuB,CAClC,MAAMC,UAAU,MAAMC,oBAAUC,MAAV,CAAiB;AACnCC,kBAAU,KADyB;AAEnCC,cAAM,CAAC,cAAD,EAAiB,0BAAjB,CAF6B,EAAjB,CAAtB;;;AAKA;AACA,UAAMC,OAAO,MAAML,QAAQM,OAAR,EAAnB;AACA,UAAMD,KAAKE,IAAL,CAAU,iCAAV,CAAN;AACA,UAAMF,KAAKG,eAAL,CAAqB,0CAArB,CAAN;AACA,UAAMC,MAAM,MAAMJ,KAAKK,KAAL,CAAW,4CAAX,EAAyDC,KAAKA,EAAEC,IAAhE,CAAlB;;AAEA;AACA,UAAMP,KAAKE,IAAL,CAAUE,GAAV,CAAN;AACA,UAAMJ,KAAKG,eAAL,CAAqB,6BAArB,CAAN;AACA,UAAMK,WAAW,MAAMR,KAAKK,KAAL,CAAW,6BAAX,EAA0CC,KAAKA,EAAEG,SAAjD,CAAvB;AACAD,aAASE,KAAT,CAAe,IAAf;AACKC,UADL,CACYL,KAAK,CAAC,CAACA,CADnB;AAEKM,OAFL,CAESN,KAAKA,EAAEO,OAAF,CAAU,MAAV,EAAkB,EAAlB,CAFd;AAGKC,WAHL,CAGaR,KAAKZ,MAAMY,CAAN,CAHlB;;AAKA,UAAMX,QAAQoB,KAAR,EAAN;AACH,C","file":"mayidaili.js","sourcesContent":["/**\r\n * 蚂蚁代理\r\n * http://www.mayidaili.com/share/\r\n */\r\n\r\nimport puppeteer from 'puppeteer'\r\nimport fetch from 'node-fetch'\r\n\r\nexport default async function (saver) {\r\n    const browser = await puppeteer.launch({\r\n        headless: false,\r\n        args: ['--no-sandbox', '--disable-setuid-sandbox']\r\n    })\r\n\r\n    // Goto share\r\n    const page = await browser.newPage()\r\n    await page.goto('http://www.mayidaili.com/share/')\r\n    await page.waitForSelector('.bs-callout.bs-callout-info:nth-child(1)')\r\n    const url = await page.$eval('.bs-callout.bs-callout-info:nth-child(1) a', x => x.href)\r\n\r\n    // Goto detail\r\n    await page.goto(url)\r\n    await page.waitForSelector('body > div:nth-child(4) > p')\r\n    const proxyStr = await page.$eval('body > div:nth-child(4) > p', x => x.innerText)\r\n    proxyStr.split(\"\\n\")\r\n        .filter(x => !!x)\r\n        .map(x => x.replace(/#.*$/, ''))\r\n        .forEach(x => saver(x))\r\n\r\n    await browser.close()\r\n}"]}